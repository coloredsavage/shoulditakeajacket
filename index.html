<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>Should I Bring a Jacket? | Real-Time Weather-Based Jacket Advice</title>
    <meta name="title" content="Should I Bring a Jacket? | Real-Time Weather-Based Jacket Advice">
    <meta name="description" content="Get instant jacket recommendations based on real-time weather conditions. Enter your location and find out if you need a jacket today with temperature, wind, and precipitation data.">
    <meta name="keywords" content="jacket weather, should i bring a jacket, weather jacket advice, what to wear today, jacket recommendation, weather clothing guide">
    <meta name="author" content="Savage & Helen">
    <link rel="canonical" href="https://www.shoulditakeajacket.com/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.shoulditakeajacket.com/">
    <meta property="og:title" content="Should I Bring a Jacket? | Real-Time Weather-Based Jacket Advice">
    <meta property="og:description" content="Get instant jacket recommendations based on real-time weather conditions. Enter your location and find out if you need a jacket today.">
    <meta property="og:image" content="https://www.shoulditakeajacket.com/jackets/1bca19114c14bcc98f4d6e15e879d6f7.png">
    <meta property="og:site_name" content="Should I Bring a Jacket?">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.shoulditakeajacket.com/">
    <meta property="twitter:title" content="Should I Bring a Jacket? | Real-Time Weather-Based Jacket Advice">
    <meta property="twitter:description" content="Get instant jacket recommendations based on real-time weather conditions. Enter your location and find out if you need a jacket today.">
    <meta property="twitter:image" content="https://www.shoulditakeajacket.com/jackets/1bca19114c14bcc98f4d6e15e879d6f7.png">
    <meta property="twitter:creator" content="@colored_savage">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="jackets/Blousson Black Wool Jacket.png">
    <link rel="apple-touch-icon" href="jackets/Blousson Black Wool Jacket.png">

    <!-- Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">

    <!-- Analytics -->
    <script defer src="https://cdn.vercel-analytics.com/v1/script.js"></script>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Should I Bring a Jacket?",
      "url": "https://www.shoulditakeajacket.com",
      "description": "Get instant jacket recommendations based on real-time weather conditions. Enter your location and find out if you need a jacket today.",
      "applicationCategory": "UtilityApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Person",
        "name": "Savage",
        "url": "https://x.com/colored_savage"
      },
      "contributor": {
        "@type": "Person",
        "name": "Helen",
        "url": "https://x.com/heyohelen"
      }
    }
    </script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f3ef;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
            letter-spacing: -0.02em;
        }

        /* Texture overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
            z-index: 1000;
        }

        .container {
            width: 100%;
            height: 100vh;
            position: relative;
        }

        /* Draggable jackets */
        .jacket-container {
            position: absolute;
            cursor: grab;
            user-select: none;
            transition: box-shadow 0.2s, transform 0.1s;
            z-index: 1;
        }

        .jacket-container:active {
            cursor: grabbing;
            z-index: 100;
        }

        .jacket-container:hover {
            z-index: 50;
        }

        .jacket-container img {
            max-width: 350px;
            height: auto;
            filter: drop-shadow(4px 4px 8px rgba(0,0,0,0.1));
            pointer-events: none;
        }

        /* Tooltip styling */
        .jacket-tooltip {
            position: absolute;
            bottom: -40px; /* Position below jacket */
            left: 50%;
            transform: translateX(-50%);
            
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            
            font-size: 13px;
            white-space: nowrap;
            pointer-events: none; /* Don't interfere with dragging */
            
            opacity: 0;
            transition: opacity 0.2s ease, transform 0.2s ease;
            z-index: 1000;
        }

        /* Show tooltip on hover */
        .jacket-container:hover .jacket-tooltip {
            opacity: 1;
            transform: translateX(-50%) translateY(-5px); /* Slight upward motion */
        }

        /* Brand name styling */
        .jacket-brand {
            font-weight: 600;
            display: block;
        }

        .jacket-model {
            font-size: 11px;
            opacity: 0.8;
            display: block;
        }

        /* Arrow pointer */
        .jacket-tooltip::before {
            content: '';
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 6px solid rgba(0, 0, 0, 0.85);
        }

        /* Mobile: Show on tap/touch */
        @media (hover: none) {
            .jacket-container.touched .jacket-tooltip {
                opacity: 1;
                transform: translateX(-50%) translateY(-5px);
            }
        }

        /* Center content */
        .center-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 50;
        }

        .center-content h1 {
            font-family: 'Caveat', cursive;
            font-size: 4rem;
            font-weight: 400;
            color: #333;
            margin-bottom: 5px;
        }

        .center-content h2 {
            font-family: 'Caveat', cursive;
            font-size: 7rem;
            font-weight: 700;
            color: #333;
            line-height: 0.9;
            margin-bottom: 30px;
        }

        /* Location input */
        .input-note {
            background: transparent;
            padding: 20px;
            text-align: center;
        }

        .input-note p {
            font-family: 'Caveat', cursive;
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #333;
        }

        .input-note input {
            width: 250px;
            padding: 10px 15px;
            border: 2px solid #333;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            text-align: center;
        }

        .input-note input:focus {
            outline: none;
        }

        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #333;
            border-top: none;
            list-style: none;
            max-height: 150px;
            overflow-y: auto;
            z-index: 100;
        }

        .suggestions.hidden {
            display: none;
        }

        .suggestions li {
            padding: 8px 12px;
            cursor: pointer;
            text-align: left;
            font-size: 0.85rem;
        }

        .suggestions li:hover {
            background: #f5f5f5;
        }

        .location-name {
            font-weight: 600;
        }

        .location-detail {
            color: #666;
            font-size: 0.75rem;
        }

        /* Result overlay */
        .result-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(245, 243, 239, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 200;
        }

        .result-overlay.visible {
            display: flex;
        }

        .result-content {
            text-align: center;
            padding: 40px;
        }

        .result-content .answer {
            font-family: 'Caveat', cursive;
            font-size: 8rem;
            font-weight: 700;
            line-height: 1;
        }

        .result-content .answer.yes { color: #FF5252; }
        .result-content .answer.maybe { color: #F57C00; }
        .result-content .answer.no { color: #4CAF50; }

        .result-content .reasoning {
            font-family: 'Caveat', cursive;
            font-size: 1.5rem;
            margin: 20px 0;
            color: #333;
        }

        .result-content .weather-info {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin: 20px 0;
        }

        .result-content .weather-item {
            text-align: center;
        }

        .result-content .weather-item .label {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: #666;
        }

        .result-content .weather-item .value {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .result-content .btn {
            margin-top: 20px;
            padding: 10px 20px;
            background: #333;
            color: white;
            border: none;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
        }

        /* Loading */
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 300;
            display: none;
        }

        .loading.visible {
            display: block;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #e0e0e0;
            border-top-color: #333;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Footer */
        .footer {
            position: fixed;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            z-index: 50;
        }

        .btn-icon {
            background: white;
            border: 1px solid #ccc;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 0.875rem;
        }

        .footer-credit {
            font-size: 0.85rem;
            color: #666;
            font-family: 'Inter', sans-serif;
        }

        .footer-credit a {
            color: #333;
            text-decoration: none;
        }

        .footer-credit a:hover {
            text-decoration: underline;
        }

        /* Controls - above header */
        .controls {
            display: flex;
            gap: 20px;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
        }

        /* Gender Toggle Switch */
        .switch {
            --hue: 30;
            --bg: #f5f3ef;
            --fg: #333;
            --light-sh: hsla(var(--hue),10%,95%,0.5);
            --dark-sh: hsla(var(--hue),10%,15%,0.4);
            --primary: hsl(340,70%,55%);
            --primary-t: hsla(340,70%,55%,0);
            display: flex;
            gap: 0.5em;
            align-items: center;
            font-size: 32px;
        }

        .switch__icon {
            width: 1em;
            height: 1em;
            transition: all 0.3s;
        }

        .switch__icon svg {
            width: 100%;
            height: 100%;
        }

        /* Male icon */
        .switch__icon--male {
            color: hsla(210,90%,60%,1);
        }

        .switch__icon--male svg path {
            stroke: hsla(210,90%,60%,1);
            transition: stroke 0.3s;
        }

        /* Female icon */
        .switch__icon--female {
            color: hsla(var(--hue),10%,10%,0.3);
        }

        .switch__icon--female svg path {
            stroke: hsla(var(--hue),10%,10%,0.3);
            transition: stroke 0.3s;
        }

        .switch__input {
            background-color: hsla(var(--hue),10%,10%,0.1);
            border-radius: 0.75em;
            box-shadow:
                0 0.0625em 0.125em var(--dark-sh) inset,
                0 0.0625em 0.125em var(--light-sh),
                0 0 0 0.125em var(--primary-t);
            display: block;
            outline: transparent;
            position: relative;
            width: 2.5em;
            height: 1.5em;
            transition: box-shadow 0.3s;
            -webkit-appearance: none;
            appearance: none;
            cursor: pointer;
            border: none;
        }

        .switch__input:focus-visible {
            box-shadow:
                0 0.0625em 0.125em var(--dark-sh) inset,
                0 0.0625em 0.125em var(--light-sh),
                0 0 0 0.125em var(--primary);
        }

        .switch__input::before {
            background-color: var(--primary);
            border-radius: 50%;
            box-shadow: 0 0.0625em 0.125em hsla(var(--hue),10%,10%,0.5);
            content: "";
            display: block;
            position: absolute;
            top: 0.25em;
            left: 0.25em;
            width: 1em;
            height: 1em;
            transition:
                background-color 0.3s,
                box-shadow 0.3s,
                transform 0.3s cubic-bezier(0.65,0.05,0.34,1);
        }

        .switch__input:checked::before {
            transform: translateX(1em);
        }

        .switch__label {
            overflow: hidden;
            position: absolute;
            width: 1px;
            height: 1px;
        }

        /* When checked (female) */
        .switch:has(.switch__input:checked) .switch__icon--male svg path {
            stroke: hsla(var(--hue),10%,10%,0.3);
        }

        .switch:has(.switch__input:checked) .switch__icon--female svg path {
            stroke: hsla(340,90%,60%,1);
        }

        /* 3D Button Style */
        .button-3d {
            position: relative;
            padding: 0 8px 12px;
            min-width: 60px;
            background: none;
            border: none;
            cursor: pointer;
        }

        .button-top {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 0;
            padding: 10px 18px;
            transform: translateY(0);
            text-align: center;
            color: #fff;
            text-shadow: 0 -1px rgba(0, 0, 0, 0.25);
            transition: transform 0.2s;
            font-size: 1.1rem;
            font-family: 'Inter', sans-serif;
        }

        .button-3d:active .button-top {
            transform: translateY(6px);
        }

        .button-top::after {
            content: '';
            position: absolute;
            z-index: -1;
            border-radius: 4px;
            width: 100%;
            height: 100%;
            box-sizing: content-box;
            background-image: radial-gradient(#cd3f64, #9d3656);
            box-shadow: inset 0 0 0px 1px rgba(255, 255, 255, 0.2), 0 1px 2px 1px rgba(255, 255, 255, 0.2);
            transition: border-radius 0.2s, padding 0.2s, width 0.2s, transform 0.2s;
        }

        .button-3d:active .button-top::after {
            border-radius: 6px;
            padding: 0 2px;
        }

        .button-bottom {
            position: absolute;
            z-index: -1;
            bottom: 4px;
            left: 4px;
            border-radius: 8px / 16px 16px 8px 8px;
            padding-top: 6px;
            width: calc(100% - 8px);
            height: calc(100% - 10px);
            box-sizing: content-box;
            background-color: #803;
            background-image:
                radial-gradient(4px 8px at 4px calc(100% - 8px), rgba(255, 255, 255, 0.25), transparent),
                radial-gradient(4px 8px at calc(100% - 4px) calc(100% - 8px), rgba(255, 255, 255, 0.25), transparent),
                radial-gradient(16px at -4px 0, rgba(255, 255, 255, 1), transparent),
                radial-gradient(16px at calc(100% + 4px) 0, rgba(255, 255, 255, 1), transparent);
            box-shadow: 0px 2px 3px 0px rgba(0, 0, 0, 0.5), inset 0px -1px 3px 3px rgba(0, 0, 0, 0.4);
            transition: border-radius 0.2s, padding-top 0.2s;
        }

        .button-3d:active .button-bottom {
            border-radius: 10px 10px 8px 8px / 8px;
            padding-top: 0;
        }

        .button-base {
            position: absolute;
            z-index: -2;
            top: 4px;
            left: 0;
            border-radius: 12px;
            width: 100%;
            height: calc(100% - 4px);
            background-color: rgba(0, 0, 0, 0.15);
            box-shadow: 0 1px 1px 0 rgba(255, 255, 255, 0.75), inset 0 2px 2px rgba(0, 0, 0, 0.25);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            body {
                overflow-y: auto;
            }

            .jacket-container {
                display: none;
            }

            .jacket-container:nth-child(-n+4) {
                display: block;
            }

            .jacket-container img {
                max-width: 150px;
            }

            .center-content {
                position: relative;
                top: auto;
                left: auto;
                transform: none;
                padding: 60px 20px;
                min-height: 100vh;
                display: flex;
                flex-direction: column;
                justify-content: center;
            }

            .center-content h1 {
                font-size: 2.5rem;
            }

            .center-content h2 {
                font-size: 4.5rem;
                margin-bottom: 20px;
            }

            .controls {
                margin-bottom: 20px;
            }

            .switch {
                font-size: 24px;
            }

            .input-note input {
                width: 100%;
                max-width: 280px;
            }

            .input-note {
                position: relative;
            }

            .suggestions {
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                width: 280px;
                max-width: 100%;
            }

            .footer {
                position: relative;
                padding: 20px 0;
            }

            .footer-credit {
                font-size: 0.75rem;
                padding: 0 20px;
                text-align: center;
            }

            .result-content {
                padding: 20px;
            }

            .result-content .answer {
                font-size: 5rem;
            }

            .result-content .reasoning {
                font-size: 1.2rem;
            }

            .result-content .weather-info {
                gap: 15px;
                flex-wrap: wrap;
            }

            .result-content .weather-item .value {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .center-content h1 {
                font-size: 2rem;
            }

            .center-content h2 {
                font-size: 3.5rem;
            }

            .switch {
                font-size: 20px;
            }

            .button-top {
                padding: 8px 14px;
                font-size: 0.9rem;
            }

            .result-content .answer {
                font-size: 4rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Draggable jackets scattered around avoiding center -->
        <!-- Top-left area -->
        <div class="jacket-container" style="top: 5%; left: 8%; transform: rotate(-5deg);">
            <img src="jackets/Aime Leon Dore x Porsche 911SC Mechanic Jacket.png" alt="AimÃ© Leon Dore Porsche 911SC Mechanic Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">AimÃ© Leon Dore</span>
                <span class="jacket-model">Porsche 911SC Mechanic Jacket</span>
            </div>
        </div>
        <!-- Top-right area -->
        <div class="jacket-container" style="top: 8%; right: 5%; transform: rotate(3deg);">
            <img src="jackets/Alpha Industries Leather Flight Jacket.png" alt="Alpha Industries Leather Flight Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">Alpha Industries</span>
                <span class="jacket-model">Leather Flight Jacket</span>
            </div>
        </div>
        <!-- Bottom-left area -->
        <div class="jacket-container" style="bottom: 12%; left: 5%; transform: rotate(8deg);">
            <img src="jackets/Ben Davis Work Jacket Stripped.png" alt="Ben Davis Work Jacket Stripped" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">Ben Davis</span>
                <span class="jacket-model">Work Jacket Stripped</span>
            </div>
        </div>
        <!-- Bottom-right area -->
        <div class="jacket-container" style="bottom: 8%; right: 10%; transform: rotate(-4deg);">
            <img src="jackets/Blousson Black Wool Jacket.png" alt="Blousson Black Wool Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">Blousson</span>
                <span class="jacket-model">Black Wool</span>
            </div>
        </div>
        <!-- Left side - upper -->
        <div class="jacket-container" style="top: 22%; left: 3%; transform: rotate(-3deg);">
            <img src="jackets/Carhartt WIP Detroit jacket.png" alt="Carhartt WIP Detroit Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">Carhartt WIP</span>
                <span class="jacket-model">Detroit Jacket</span>
            </div>
        </div>
        <!-- Right side - upper -->
        <div class="jacket-container" style="top: 18%; right: 2%; transform: rotate(6deg);">
            <img src="jackets/Days Ranger navy blue whipcord work jacket. .png" alt="Days Ranger Navy Blue Whipcord Work Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">Days Ranger</span>
                <span class="jacket-model">Navy Blue Whipcord Work Jacket</span>
            </div>
        </div>
        <!-- Left side - lower -->
        <div class="jacket-container" style="bottom: 25%; left: 6%; transform: rotate(2deg);">
            <img src="jackets/KNOX Blue Navy Jacket.png" alt="KNOX Blue Navy Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">KNOX</span>
                <span class="jacket-model">Blue Navy Jacket</span>
            </div>
        </div>
        <!-- Right side - lower -->
        <div class="jacket-container" style="bottom: 22%; right: 4%; transform: rotate(-7deg);">
            <img src="jackets/LOUECHY Men's Corduroy Trucker Jacket.png" alt="LOUECHY Corduroy Trucker Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">LOUECHY</span>
                <span class="jacket-model">Corduroy Trucker Jacket</span>
            </div>
        </div>
        <!-- Top area - left -->
        <div class="jacket-container" style="top: 3%; left: 20%; transform: rotate(4deg);">
            <img src="jackets/O'Connell's Destroyer Goatskin Baracuta jacket .png" alt="O'Connell's Destroyer Goatskin Baracuta" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">O'Connell's</span>
                <span class="jacket-model">Destroyer Goatskin Baracuta</span>
            </div>
        </div>
        <!-- Top area - right -->
        <div class="jacket-container" style="top: 6%; right: 18%; transform: rotate(-2deg);">
            <img src="jackets/Stray Rats Dickies Eisenhower Jacket.png" alt="Stray Rats Dickies Eisenhower Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">Stray Rats x Dickies</span>
                <span class="jacket-model">Eisenhower Jacket</span>
            </div>
        </div>
        <!-- Bottom area -->
        <div class="jacket-container" style="bottom: 5%; left: 22%; transform: rotate(5deg);">
            <img src="jackets/Vintage Polo Ralph Lauren Navy Jacket.png" alt="Vintage Polo Ralph Lauren Navy Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">Polo Ralph Lauren</span>
                <span class="jacket-model">Vintage Navy Jacket</span>
            </div>
        </div>

        <!-- Female jackets - initially hidden but will be shown when gender toggle is switched -->
        <!-- Top-left area -->
        <div class="jacket-container" style="top: 5%; left: 8%; transform: rotate(-5deg); display: none;">
            <img src="female-jackets/GAMIRA's Womens Coat.png" alt="GAMIRA's Women's Coat" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">GAMIRA</span>
                <span class="jacket-model">Women's Coat</span>
            </div>
        </div>
        <!-- Top-right area -->
        <div class="jacket-container" style="top: 8%; right: 5%; transform: rotate(3deg); display: none;">
            <img src="female-jackets/H & M Denim Jacket.png" alt="H&M Denim Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">H&M</span>
                <span class="jacket-model">Denim Jacket</span>
            </div>
        </div>
        <!-- Bottom-left area -->
        <div class="jacket-container" style="bottom: 12%; left: 5%; transform: rotate(8deg); display: none;">
            <img src="female-jackets/J. Crew Merlot Majesty Peacoat.png" alt="J. Crew Merlot Majesty Peacoat" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">J. Crew</span>
                <span class="jacket-model">Merlot Majesty Peacoat</span>
            </div>
        </div>
        <!-- Bottom-right area -->
        <div class="jacket-container" style="bottom: 8%; right: 10%; transform: rotate(-4deg); display: none;">
            <img src="female-jackets/Manokhi HANA Jacket.png" alt="Manokhi HANA Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">Manokhi</span>
                <span class="jacket-model">HANA Jacket</span>
            </div>
        </div>
        <!-- Left side - upper -->
        <div class="jacket-container" style="top: 22%; left: 3%; transform: rotate(-3deg); display: none;">
            <img src="female-jackets/Micas Denim Metallic Button Outerwear.png" alt="Micas Denim Metallic Button Outerwear" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">Micas</span>
                <span class="jacket-model">Denim Metallic Button Outerwear</span>
            </div>
        </div>
        <!-- Right side - upper -->
        <div class="jacket-container" style="top: 18%; right: 2%; transform: rotate(6deg); display: none;">
            <img src="female-jackets/Miu Miu padded corduroy-collar blouson.png" alt="Miu Miu Padded Corduroy-Collar Blouson" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">Miu Miu</span>
                <span class="jacket-model">Padded Corduroy-Collar Blouson</span>
            </div>
        </div>
        <!-- Left side - lower -->
        <div class="jacket-container" style="bottom: 25%; left: 6%; transform: rotate(2deg); display: none;">
            <img src="female-jackets/Mos Mosh Wanda check pattern blaze.png" alt="Mos Mosh Wanda Check Pattern Blazer" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">Mos Mosh</span>
                <span class="jacket-model">Wanda Check Pattern Blazer</span>
            </div>
        </div>
        <!-- Right side - lower -->
        <div class="jacket-container" style="bottom: 22%; right: 4%; transform: rotate(-7deg); display: none;">
            <img src="female-jackets/ReSee Pre Fall 2021 Flared Trench.png" alt="ReSee Pre Fall 2021 Flared Trench" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">ReSee</span>
                <span class="jacket-model">Pre Fall 2021 Flared Trench</span>
            </div>
        </div>
        <!-- Top area - left -->
        <div class="jacket-container" style="top: 3%; left: 20%; transform: rotate(4deg); display: none;">
            <img src="female-jackets/TALISHKO Fur Line Up Zip Up.png" alt="TALISHKO Fur Line Up Zip Up" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">TALISHKO</span>
                <span class="jacket-model">Fur Line Up Zip Up</span>
            </div>
        </div>
        <!-- Top area - right -->
        <div class="jacket-container" style="top: 6%; right: 18%; transform: rotate(-2deg); display: none;">
            <img src="female-jackets/Toogood The Skipper jacket.png" alt="Toogood The Skipper Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">Toogood</span>
                <span class="jacket-model">The Skipper Jacket</span>
            </div>
        </div>
        <!-- Bottom area -->
        <div class="jacket-container" style="bottom: 5%; left: 22%; transform: rotate(5deg); display: none;">
            <img src="female-jackets/Toteme Embroidered Scarf Jacket.png" alt="TotÃªme Embroidered Scarf Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">TotÃªme</span>
                <span class="jacket-model">Embroidered Scarf Jacket</span>
            </div>
        </div>
        <!-- Additional female jacket -->
        <div class="jacket-container" style="top: 15%; left: 15%; transform: rotate(-1deg); display: none;">
            <img src="female-jackets/Zara houndstooth belted jacket.png" alt="Zara Houndstooth Belted Jacket" class="draggable-jacket">
            <div class="jacket-tooltip">
                <span class="jacket-brand">Zara</span>
                <span class="jacket-model">Houndstooth Belted Jacket</span>
            </div>
        </div>

        <!-- Center content with title and input -->
        <div class="center-content">
            <div class="controls">
                <div class="switch">
                    <span class="switch__icon switch__icon--male">
                        <svg width="24px" height="24px" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.2323 9.74707C13.1474 8.66733 11.6516 8 10 8C6.68629 8 4 10.6863 4 14C4 17.3137 6.68629 20 10 20C13.3137 20 16 17.3137 16 14C16 12.3379 15.3242 10.8337 14.2323 9.74707ZM14.2323 9.74707L20 4M20 4H16M20 4V8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                    </span>
                    <input class="switch__input" type="checkbox" id="gender-toggle">
                    <label class="switch__label" for="gender-toggle">Toggle gender</label>
                    <span class="switch__icon switch__icon--female">
                        <svg width="24px" height="24px" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 15C15.3137 15 18 12.3137 18 9C18 5.68629 15.3137 3 12 3C8.68629 3 6 5.68629 6 9C6 12.3137 8.68629 15 12 15ZM12 15V19M12 21V19M12 19H10M12 19H14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                    </span>
                </div>
                <button id="mute-btn" class="button-3d" title="Toggle music">
                    <span class="button-top">ðŸ”‡</span>
                    <span class="button-bottom"></span>
                    <span class="button-base"></span>
                </button>
            </div>
            <h1>Should I bring a</h1>
            <h2>JACKET?</h2>
            <div class="input-note">
                <p>Where are you?</p>
                <input type="text" id="location-input" placeholder="Enter city name" autocomplete="off">
                <ul id="location-suggestions" class="suggestions hidden"></ul>
            </div>
        </div>

        <!-- Loading -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
        </div>

        <!-- Result overlay -->
        <div class="result-overlay" id="result">
            <div class="result-content">
                <div id="answer" class="answer">YES</div>
                <p id="jacket-type" class="jacket-type"></p>
                <p id="reasoning" class="reasoning"></p>
                <p id="rain-advice" class="rain-advice" style="color: #0066cc; font-size: 1rem; margin-top: 10px;"></p>
                <div class="weather-info">
                    <div class="weather-item">
                        <span class="label">Now</span>
                        <span id="current-temp" class="value">--Â°</span>
                    </div>
                    <div class="weather-item">
                        <span class="label">Later</span>
                        <span id="later-temp" class="value">--Â°</span>
                    </div>
                    <div class="weather-item">
                        <span class="label">Wind</span>
                        <span id="wind-speed" class="value">-- mph</span>
                    </div>
                </div>
                <p id="location-name" style="color: #666; font-size: 0.875rem;"></p>
                <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
                    <button id="result-toggle-units" class="btn" style="padding: 10px 16px;" title="Toggle Â°F/Â°C">Â°F</button>
                    <button class="btn" id="change-location">Check another location</button>
                </div>
            </div>
        </div>

        <div class="footer">
            <p class="footer-credit">
                built by <a href="https://x.com/colored_savage" target="_blank">savage</a> and <a href="https://x.com/heyohelen" target="_blank">helen</a>
            </p>
        </div>

        <audio id="bg-music" loop>
            <source src="music/background.mp3" type="audio/mpeg">
        </audio>
    </div>

    <script src="js/weather.js"></script>
    <script src="js/decision.js"></script>
    <script>
        // Moodboard App
        const MoodboardApp = {
            state: {
                useCelsius: false,
                weatherData: null,
                suggestions: [],
                selectedIndex: -1,
                searchTimeout: null,
                isMale: true,
                isMuted: true
            },


            elements: {},

            init() {
                this.cacheElements();
                this.bindEvents();
                this.initDraggable();
                this.initAudio();
            },

            initAudio() {
                this.elements.music = document.getElementById('bg-music');
                this.elements.muteBtn = document.getElementById('mute-btn');
            },

            cacheElements() {
                this.elements = {
                    loading: document.getElementById('loading'),
                    result: document.getElementById('result'),
                    locationInput: document.getElementById('location-input'),
                    suggestions: document.getElementById('location-suggestions'),
                    answer: document.getElementById('answer'),
                    jacketType: document.getElementById('jacket-type'),
                    reasoning: document.getElementById('reasoning'),
                    rainAdvice: document.getElementById('rain-advice'),
                    currentTemp: document.getElementById('current-temp'),
                    laterTemp: document.getElementById('later-temp'),
                    windSpeed: document.getElementById('wind-speed'),
                    locationName: document.getElementById('location-name'),
                    changeLocation: document.getElementById('change-location')
                };
            },

            bindEvents() {
                this.elements.locationInput.addEventListener('input', (e) => this.handleInput(e));
                this.elements.locationInput.addEventListener('keydown', (e) => this.handleKeydown(e));
                this.elements.changeLocation.addEventListener('click', () => this.hideResult());

                // Result screen toggle
                document.getElementById('result-toggle-units').addEventListener('click', () => this.toggleUnits());

                // Gender toggle
                document.getElementById('gender-toggle').addEventListener('change', (e) => this.toggleGender(e.target.checked));

                // Mute toggle
                document.getElementById('mute-btn').addEventListener('click', () => this.toggleMute());

                document.addEventListener('click', (e) => {
                    if (!this.elements.locationInput.contains(e.target) &&
                        !this.elements.suggestions.contains(e.target)) {
                        this.hideSuggestions();
                    }
                });
            },

            toggleGender(isFemale) {
                this.state.isMale = !isFemale;

                // Get all jacket containers
                const allContainers = document.querySelectorAll('.jacket-container');
                
                // First 11 are male jackets, rest are female jackets
                const maleContainers = Array.from(allContainers).slice(0, 11);
                const femaleContainers = Array.from(allContainers).slice(11);

                if (this.state.isMale) {
                    // Show male jackets, hide female jackets
                    maleContainers.forEach(container => {
                        container.style.display = 'block';
                    });
                    femaleContainers.forEach(container => {
                        container.style.display = 'none';
                    });
                } else {
                    // Show female jackets, hide male jackets
                    maleContainers.forEach(container => {
                        container.style.display = 'none';
                    });
                    femaleContainers.forEach(container => {
                        container.style.display = 'block';
                    });
                }
            },

            toggleMute() {
                this.state.isMuted = !this.state.isMuted;
                const btn = document.getElementById('mute-btn');
                const btnTop = btn.querySelector('.button-top');

                if (this.state.isMuted) {
                    this.elements.music.pause();
                    btnTop.textContent = 'ðŸ”‡';
                } else {
                    this.elements.music.play().catch(() => {});
                    btnTop.textContent = 'ðŸ”Š';
                }
            },

            initDraggable() {
                const containers = document.querySelectorAll('.jacket-container');

                containers.forEach(container => {
                    let isDragging = false;
                    let startX, startY, initialX, initialY;
                    let touchTimer;

                    // Mouse drag handlers
                    container.addEventListener('mousedown', (e) => {
                        isDragging = true;
                        startX = e.clientX;
                        startY = e.clientY;

                        const rect = container.getBoundingClientRect();
                        initialX = rect.left;
                        initialY = rect.top;

                        container.style.position = 'fixed';
                        container.style.left = initialX + 'px';
                        container.style.top = initialY + 'px';
                        container.style.right = 'auto';
                        container.style.bottom = 'auto';
                    });

                    // Touch handlers for mobile
                    container.addEventListener('touchstart', (e) => {
                        // Show tooltip after brief touch
                        touchTimer = setTimeout(() => {
                            container.classList.add('touched');
                        }, 200);
                        
                        // Start dragging
                        isDragging = true;
                        const touch = e.touches[0];
                        startX = touch.clientX;
                        startY = touch.clientY;

                        const rect = container.getBoundingClientRect();
                        initialX = rect.left;
                        initialY = rect.top;

                        container.style.position = 'fixed';
                        container.style.left = initialX + 'px';
                        container.style.top = initialY + 'px';
                        container.style.right = 'auto';
                        container.style.bottom = 'auto';
                    });

                    container.addEventListener('touchmove', (e) => {
                        // Cancel tooltip if dragging
                        clearTimeout(touchTimer);
                        container.classList.remove('touched');
                        
                        if (!isDragging) return;

                        const touch = e.touches[0];
                        const dx = touch.clientX - startX;
                        const dy = touch.clientY - startY;

                        container.style.left = (initialX + dx) + 'px';
                        container.style.top = (initialY + dy) + 'px';
                    });

                    container.addEventListener('touchend', () => {
                        clearTimeout(touchTimer);
                        // Hide tooltip after delay
                        setTimeout(() => {
                            container.classList.remove('touched');
                        }, 2000);
                        isDragging = false;
                    });

                    document.addEventListener('mousemove', (e) => {
                        if (!isDragging) return;

                        const dx = e.clientX - startX;
                        const dy = e.clientY - startY;

                        container.style.left = (initialX + dx) + 'px';
                        container.style.top = (initialY + dy) + 'px';
                    });

                    document.addEventListener('mouseup', () => {
                        isDragging = false;
                    });
                });
            },

            handleInput(e) {
                const query = e.target.value.trim();

                if (this.state.searchTimeout) {
                    clearTimeout(this.state.searchTimeout);
                }

                if (query.length < 2) {
                    this.hideSuggestions();
                    return;
                }

                this.state.searchTimeout = setTimeout(async () => {
                    const locations = await WeatherAPI.searchLocations(query);
                    this.state.suggestions = locations;
                    this.state.selectedIndex = -1;
                    this.renderSuggestions();
                }, 300);
            },

            handleKeydown(e) {
                const suggestions = this.state.suggestions;
                if (suggestions.length === 0) return;

                switch (e.key) {
                    case 'ArrowDown':
                        e.preventDefault();
                        this.state.selectedIndex = Math.min(this.state.selectedIndex + 1, suggestions.length - 1);
                        this.renderSuggestions();
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        this.state.selectedIndex = Math.max(this.state.selectedIndex - 1, -1);
                        this.renderSuggestions();
                        break;
                    case 'Enter':
                        e.preventDefault();
                        if (this.state.selectedIndex >= 0) {
                            this.selectLocation(suggestions[this.state.selectedIndex]);
                        } else if (suggestions.length > 0) {
                            this.selectLocation(suggestions[0]);
                        }
                        break;
                    case 'Escape':
                        this.hideSuggestions();
                        break;
                }
            },

            renderSuggestions() {
                const suggestions = this.state.suggestions;
                if (suggestions.length === 0) {
                    this.hideSuggestions();
                    return;
                }

                this.elements.suggestions.innerHTML = suggestions.map((loc, index) => {
                    const detail = loc.state ? `${loc.state}, ${loc.country}` : loc.country;
                    const selected = index === this.state.selectedIndex ? 'selected' : '';
                    return `
                        <li class="${selected}" data-index="${index}">
                            <div class="location-name">${loc.name}</div>
                            <div class="location-detail">${detail}</div>
                        </li>
                    `;
                }).join('');

                this.elements.suggestions.querySelectorAll('li').forEach(li => {
                    li.addEventListener('click', () => {
                        const index = parseInt(li.dataset.index);
                        this.selectLocation(this.state.suggestions[index]);
                    });
                });

                this.elements.suggestions.classList.remove('hidden');
            },

            async selectLocation(location) {
                this.hideSuggestions();
                this.elements.loading.classList.add('visible');

                // Clear cache to get fresh data for new location
                WeatherAPI.clearCache();

                try {
                    const weatherData = await WeatherAPI.getWeatherByCoords(location.lat, location.lon);
                    weatherData.location.name = location.name;
                    weatherData.location.country = location.state
                        ? `${location.state}, ${location.country}`
                        : location.country;
                    this.state.weatherData = weatherData;
                    await this.showResult(weatherData);
                } catch (error) {
                    alert('Could not fetch weather data. Please try again.');
                }

                this.elements.loading.classList.remove('visible');
            },

            async showResult(weatherData) {
                try {
                    const decision = await JacketDecision.makeDecision(weatherData);

                    this.elements.answer.textContent = decision.answer;
                    this.elements.answer.className = 'answer ' + decision.answer.toLowerCase();
                    this.elements.jacketType.textContent = decision.jacketType || '';
                    this.elements.reasoning.textContent = decision.reasoning;
                    this.elements.rainAdvice.textContent = decision.rainAdvice || '';
                    this.updateTemperatureDisplay(weatherData);
                    this.elements.windSpeed.textContent = `${weatherData.current.windSpeed} mph`;
                    this.elements.locationName.textContent = `${weatherData.location.name}, ${weatherData.location.country}`;

                    this.elements.result.classList.add('visible');
                } catch (error) {
                    console.error('Error making jacket decision:', error);
                    // Fallback to basic decision if regional/seasonal logic fails
                    const basicDecision = {
                        answer: weatherData.current.temp < 60 ? 'YES' : 'NO',
                        reasoning: `It's ${weatherData.current.temp}Â°F`,
                        jacketType: weatherData.current.temp < 60 ? 'Light jacket' : null,
                        rainAdvice: weatherData.precipitation.isRaining ? 'Rain expected' : ''
                    };
                    
                    this.elements.answer.textContent = basicDecision.answer;
                    this.elements.answer.className = 'answer ' + basicDecision.answer.toLowerCase();
                    this.elements.jacketType.textContent = basicDecision.jacketType || '';
                    this.elements.reasoning.textContent = basicDecision.reasoning;
                    this.elements.rainAdvice.textContent = basicDecision.rainAdvice || '';
                    this.updateTemperatureDisplay(weatherData);
                    this.elements.windSpeed.textContent = `${weatherData.current.windSpeed} mph`;
                    this.elements.locationName.textContent = `${weatherData.location.name}, ${weatherData.location.country}`;

                    this.elements.result.classList.add('visible');
                }
            },

            hideResult() {
                this.elements.result.classList.remove('visible');
                this.elements.locationInput.value = '';
            },

            updateTemperatureDisplay(weatherData) {
                const { current, forecast } = weatherData || this.state.weatherData;
                if (this.state.useCelsius) {
                    this.elements.currentTemp.textContent = `${JacketDecision.toCelsius(current.temp)}Â°C`;
                    this.elements.laterTemp.textContent = `${JacketDecision.toCelsius(forecast.sixHour.temp)}Â°C`;
                } else {
                    this.elements.currentTemp.textContent = `${current.temp}Â°F`;
                    this.elements.laterTemp.textContent = `${forecast.sixHour.temp}Â°F`;
                }
            },

            toggleUnits() {
                this.state.useCelsius = !this.state.useCelsius;
                const unitText = this.state.useCelsius ? 'Â°C' : 'Â°F';
                document.getElementById('result-toggle-units').textContent = unitText;
                if (this.state.weatherData) {
                    this.updateTemperatureDisplay();
                }
            },

            hideSuggestions() {
                this.elements.suggestions.classList.add('hidden');
                this.state.selectedIndex = -1;
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            MoodboardApp.init();
        });
    </script>
</body>
</html>
